import pytest

from gdm import (
    DistributionBus,
    DistributionComponent,
    PhaseVoltageSourceEquipment,
    VoltageSourceEquipment,
    DistributionVoltageSource,
    ConcentricCableEquipment,
    BareConductorEquipment,
    SequenceImpedanceBranchEquipment,
    MatrixImpedanceBranchEquipment,
    GeometryBranchEquipment,
    DistributionBranch,
    MatrixImpedanceBranch,
    SequenceImpedanceBranch,
    GeometryBranch,
    PhaseCapacitorEquipment,
    CapacitorEquipment,
    DistributionCapacitor,
    DistributionLoad,
    WindingEquipment,
    TapWindingEquipment,
    DistributionTransformer,
    DistributionTransformerEquipment,
    DistributionFeeder,
    DistributionSubstation,
    SolarEquipment,
    DistributionSolar,
    DistributionRegulator,
    CapacitorController,
    VoltageCapacitorController,
    ActivePowerCapacitorController,
    ReactivePowerCapacitorController,
    CurrentCapacitorController,
    DailyTimedCapacitorController,
    InverterController,
    PowerfactorInverterController,
    VoltVarInverterController,
    VoltVarVoltWattInverterController,
    RegulatorController,
    DistributionSwitch,
    DistributionFuse,
    SwitchedDistributionBranch,
    MatrixImpedanceFuseEquipment,
    MatrixImpedanceFuse,
    MatrixImpedanceSwitch,
    Curve,
    TimeCurrentCurve,
    DistributionRecloser,
    MatrixImpedanceRecloserEquipment,
    MatrixImpedanceRecloser,
    RecloserControllerEquipment,
    DistributionSwitchController,
    DistributionRecloserController,
    MatrixImpedanceSwitchEquipment,
    VoltWattInverterController,
    InverterEquipment,
)


CLASSES_TO_CHECK_JSON_SCHEMA = [
    DistributionBus,
    DistributionComponent,
    PhaseVoltageSourceEquipment,
    VoltageSourceEquipment,
    DistributionVoltageSource,
    ConcentricCableEquipment,
    BareConductorEquipment,
    SequenceImpedanceBranchEquipment,
    MatrixImpedanceBranchEquipment,
    GeometryBranchEquipment,
    DistributionBranch,
    MatrixImpedanceBranch,
    SequenceImpedanceBranch,
    GeometryBranch,
    PhaseCapacitorEquipment,
    CapacitorEquipment,
    DistributionCapacitor,
    DistributionLoad,
    WindingEquipment,
    TapWindingEquipment,
    DistributionTransformer,
    DistributionTransformerEquipment,
    DistributionFeeder,
    DistributionSubstation,
    SolarEquipment,
    DistributionSolar,
    DistributionRegulator,
    CapacitorController,
    VoltageCapacitorController,
    ActivePowerCapacitorController,
    ReactivePowerCapacitorController,
    CurrentCapacitorController,
    DailyTimedCapacitorController,
    InverterController,
    PowerfactorInverterController,
    VoltVarInverterController,
    VoltVarVoltWattInverterController,
    RegulatorController,
    DistributionSwitch,
    DistributionFuse,
    SwitchedDistributionBranch,
    MatrixImpedanceFuseEquipment,
    MatrixImpedanceFuse,
    MatrixImpedanceSwitch,
    Curve,
    TimeCurrentCurve,
    DistributionRecloser,
    MatrixImpedanceRecloserEquipment,
    MatrixImpedanceRecloser,
    RecloserControllerEquipment,
    DistributionSwitchController,
    DistributionRecloserController,
    MatrixImpedanceSwitchEquipment,
    VoltWattInverterController,
    InverterEquipment,
]


@pytest.mark.parametrize("component", CLASSES_TO_CHECK_JSON_SCHEMA)
def test_json_schema(component):
    json_schema = component.model_json_schema()
    assert isinstance(json_schema, dict)
